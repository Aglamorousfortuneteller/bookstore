<!-- profile.html -->
{% extends 'base.html' %}
{% block title %}–ü—Ä–æ—Ñ–∏–ª—å{% endblock %}

{% block content %}

<h1 class="page-title" style="text-align: center;">–ü—Ä–æ—Ñ–∏–ª—å</h1>


<div class="profile-container">

    <div class="card" style="max-width: 500px; margin: 0 auto;">

        <p><strong>–ò–º—è:</strong> {{ current_user.first_name }} {{ current_user.last_name }}</p>
        <p><strong>Email:</strong> {{ current_user.email }}</p>
        <p><strong>–¢–µ–ª–µ—Ñ–æ–Ω:</strong> {{ current_user.phone }}</p>
        <a href="{{ url_for('orders') }}" class="orders-link">üì¶ –ú–æ–∏ –∑–∞–∫–∞–∑—ã</a>
    </div>

    <div class="card" style="max-width: 500px; margin: 20px auto;">
        <h2>üîí –°–º–µ–Ω–∞ –ø–∞—Ä–æ–ª—è</h2>
        <form method="post" action="{{ url_for('change_password') }}">
            <div class="form-group">
                <label for="current_password">–¢–µ–∫—É—â–∏–π –ø–∞—Ä–æ–ª—å</label>
                <input type="password" id="current_password" name="current_password" required>
            </div>
            <div class="form-group">
                <label for="new_password">–ù–æ–≤—ã–π –ø–∞—Ä–æ–ª—å</label>
                <input type="password" id="new_password" name="new_password" required>
            </div>
            <button type="submit">–°–º–µ–Ω–∏—Ç—å –ø–∞—Ä–æ–ª—å</button>
        </form>
    </div>

    <div class="card" style="max-width: 500px; margin: 20px auto; text-align: center;">
        <h2 style="color: red; text-align: center;">‚ùå –£–¥–∞–ª–µ–Ω–∏–µ –∞–∫–∫–∞—É–Ω—Ç–∞</h2>
        <div class="delete-form">
            <button type="button" onclick="openAccountPopup()">–£–¥–∞–ª–∏—Ç—å –∞–∫–∫–∞—É–Ω—Ç</button>
        </div>
    </div>

    <a href="{{ url_for('index') }}" class="floating-back-button">‚Üê –ù–∞ –≥–ª–∞–≤–Ω—É—é</a>
</div>

<!-- Overlay + Popup -->
<div id="overlay" onclick="closeAccountPopup()"></div>
<div id="delete-account-popup">
    <p style="font-weight: bold; margin-bottom: 15px;">–£–¥–∞–ª–∏—Ç—å –∞–∫–∫–∞—É–Ω—Ç –±–µ–∑–≤–æ–∑–≤—Ä–∞—Ç–Ω–æ?</p>
    <form method="post" action="{{ url_for('delete_account') }}">
        <div style="display: flex; justify-content: center; gap: 10px;">
            <button type="submit" style="background-color: red;">–î–∞</button>
            <button type="button" onclick="closeAccountPopup()">–ù–µ—Ç</button>
        </div>
    </form>
</div>

<script>
    function openAccountPopup() {
        document.getElementById('delete-account-popup').style.display = 'block';
        document.getElementById('overlay').style.display = 'block';
    }

    function closeAccountPopup() {
        document.getElementById('delete-account-popup').style.display = 'none';
        document.getElementById('overlay').style.display = 'none';
    }
</script>
{% endblock %}
